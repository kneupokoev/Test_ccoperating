# Паспорт задачи "Просмотр истории операций по картам"

**Цель**: документ описывает доработку «Просмотр Клиентом истории операций по карте».

Раздел доступен действующим пользователям дебетовых карт Банка, зарегистрированным в ДБО. Вызывается по опции «История операций в карте».

## Фронт



![Имеется макет	](//https://support.bsc-ideas.com/confl/display/RAD/AN_DOC_Workshop/150x100)


Задачи по блоку

Сущность  | Действие | Ссылка на результат|
------------- | ------------- | -------------------|
Экран на пять и десять операций|Отрисовать/Согласовать|
Текст, выводимый при отсутствии операций|Согласовать|
Экран, выводимый при отсутствии операций|Отрисовать/Согласовать|
Экран при ошибке бэка|Отрисовать/Согласовать|
Отображение фильтрации, группировки и сортировки на фронте|Согласовать|
Экраны выбора периода выводимых операций|Отрисовать/Согласовать|
Экран с кнопками фильтрации по типам и категориям операций|Отрисовать/Согласовать|
Экраны сортировки и группировки|Отрисовать/Согласовать|
Экраны для отображения данных по отдельным операциям|Выяснить, существуют ли и нужны ли Заказчику. Если не существует, но требуется – вынести в отдельную подзадачу|

## Блок "История операций по картам"

Для отображения раздела frontend инициирует вызов сервиса Cards

GET api/cards/transactions

**Входные параметры**

Наименование параметра  | Тип | Формат| Описание |
---------- | ---------| ----------------| ----------|
cardnumber |String||Виртуальный или полный номер карты
Тcardid3c |Number||ИД карты, используется как альтернатива cardnumber
begindate |String|yyyy-mm-dd|Дата начала периода, за который запрашивается информация
enddate |String|yyyy-mm-dd|Дата окончания периода, за который запрашивается информация
numberOfOps |Number||Максимальное количество операций, которое нужно вернуть в ответ

**Выходные параметры**

Наименование поля  | Тип | Описание |
---------- | ---------| ----------------|
transaction_date|DateTime|Дата операции|
transaction_currency|String|Валюта карты| 
transaction_amount|Number|Сумма операции в валюте карты|
place|String|Параметры пункта обслуживания (название и город)| 
OPERATIONSTATUS|String|Статус операции|
oper_type|String|	 Тип операции, IBN - оплата услуг в ИБ, POS - POS, ATM - наличка, BAL - платный запрос баланса карты, P2P - P2P, KOM - комиссия, KAS - наличка, ACC - перевод по счету|
mcc|Number|Код идентифицирующий категорию (бизнес-код) точки сервиса|
description|String|Назначение операции|
card_sign|String|Знак операции, принимает значения 'Debit' или 'Credit'|
authorization_code|Number|Код авторизации. Код, присвоенный Участником, разрешившим совершение операции|
auth_date|Date|Дата операционного дня проведения расчетов по операции|
auth_currency|String|Валюта операции|
auth_amount|Number|Сумма операции в валюте транзакции|

## Сценарии

*Основной сценарий (МС)*
1.	Сервис получает и разбирает ответ на запрос.
2.	Сервис проверяет, что в ответе непустой список операций. В противном случае – АС.
3.	Список операций сортируется по убыванию даты.
4.	Список выводится на экран.
5.	Сценарий завершается.

*Альтернативный сценарий (АС)*
1.	Получен пустой список.
2.	Вывод сообщения об отсутствии операций.
3.	Сценарий завершается.

*Исключительный сценарий (ЕС)*
1.	Нет ответа.
2.	Вывод сообщения об ошибке.
3.	Сценарий завершается.

Задачи по блоку:
- Уточнить, нужно ли доработать запрос под фильтры по типам операций, категориям, механизмы сортировки по датам, суммам. Сейчас запрос дает возможность выбора периода
- После согласования макетов сопоставить поля вывода во фронте с ответом бэка



 






