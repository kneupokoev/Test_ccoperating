@startuml
(*) --> "Проверить доступность \ncsv-файла"

if "Файл доступен" then
  -->[Да] "Проверить возможность \nразбора csv-файла"

  if "Разбор файла возможен" then
    -->[Да] "Проверить корректность \ncsv-файла (поиск \nзаголовков атрибутов)"
  
    if "Файл корректен" then
      -->[Да] "Проверить изменен ли \ncsv-файл после \nпоследнего обновления"
    
      if "Файл изменен (modifyDate \n<> LAST_SERVICE_POINT\n_UPDATE_DATE)" then
        -->[Да] "Обновить данные о \nточках обслуживания"
        --> "Сохранить результат \nобновления списка \nв журнал"
       
        if "Результат обновления \nуспешен" then
          -->[Да] "Обновить системный параметр\n LAST_SERVICE_POINT_UPDATE_DATE"
          -> ===B2===
        else
          ->[Нет] ===B2===
        endif

      else
        ->[Нет] ===B2===
      endif


    else
      ->[Нет] ===B2===
    endif

  else
    ->[Нет] ===B1===
  endif

else
  ->[Нет] ===B1===
  --> "Сохранить в серверный лог \nописание ошибки"
endif

-> ===B2=== 
-> (*)
@enduml